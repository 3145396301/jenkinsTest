(function(){"use strict";var t={3513:function(t,e,n){var i=n(6848),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("CheckerBoard")],1)},r=[],o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{height:"50px"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.matchWaiting,expression:"matchWaiting"}],staticStyle:{color:"white"}},[t._v("匹配中")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.enable,expression:"enable"}],staticStyle:{color:"white"}},[t._v("请你执棋")])]),e("div",{staticClass:"main"},[e("table",{attrs:{id:"drops"}},t._l(t.size+1,(function(n){return e("tr",{key:n},t._l(t.size+1,(function(i){return e("td",{key:i,on:{click:function(e){return t.fallingChild(n,i)},mouseleave:function(e){return t.mouseleave(n,i)},mouseover:function(e){return t.mouseover(n,i)}}},[e("div",{class:t.cls[n][i]})])})),0)})),0),e("table",{attrs:{id:"board",border:"1",cellspacing:"0",cellpadding:"0"}},t._l(t.size,(function(n){return e("tr",{key:n},t._l(t.size,(function(t){return e("td",{key:t})})),0)})),0),e("button",{on:{click:t.startOnline}},[t._v("匹配")]),e("button",{on:{click:t.admitDefeat}},[t._v("认输")]),e("button",{on:{click:t.repentance}},[t._v("悔棋")])]),e("audio",{ref:"audio",attrs:{src:"/mp3/"}})])},l=[];let a=window.location,c="";c="https:"===a.protocol?"wss:":"ws:",c+="//"+a.host;var u={mounted(){this.init()},data(){return{size:14,cls:"",ws:null,enable:!1,matchWaiting:!1}},methods:{admitDefeat(){this.enable?this.ws.send("[surrender]"):alert("不是你的回合!")},init(){this.cls=[];let t=this.cls;for(let e=1;e<=this.size+1;e++){t[e]=[];for(let n=1;n<=this.size+1;n++)t[e][n]=(0,i.Kh)({w:!1,b:!1,preview:!1,kiko:!0})}},repentance(){this.enable?(this.ws.send("[repentance]"),this.enable=!1):alert("不是你的回合!")},fallingChild(t,e){this.enable&&(this.ws.send(t-1+","+(e-1)),this.enable=!1)},mouseleave(t,e){this.cls[t][e].w||this.cls[t][e].b||(this.cls[t][e].preview=!1)},mouseover(t,e){this.cls[t][e].w||this.cls[t][e].b||(this.cls[t][e].preview=!0)},startOnline(){if(null!=this.ws)return void alert("已经在匹配中");this.ws=new WebSocket(c+"/startOnline");let t=this.ws;this.matchWaiting=!0,t.onmessage=e=>{if(console.log(e.data),"[win]"===e.data)alert("win");else if("[lose]"===e.data)alert("lose");else if("[yourTurn]"===e.data)this.matchWaiting=!1,console.log("ok"),this.enable=!0;else if(e.data.startsWith("[repentance]")){let t=e.data.split(","),n=Number(t[1])+1,i=Number(t[2])+1,s=Number(t[3])+1,r=Number(t[4])+1;console.log(n,i,s,r),this.cls[n][i].w=!1,this.cls[n][i].b=!1,this.cls[s][r].w=!1,this.cls[s][r].b=!1}else{let t=JSON.parse(e.data),n=t.x+1,i=t.y+1;console.log(t),"0"==t.color?this.cls[n][i].w=!0:this.cls[n][i].b=!0}t.onclose=()=>{this.init(),this.ws=null,this.enable=!1,this.matchWaiting=!1}}}}},h=u,f=n(1656),d=(0,f.A)(h,o,l,!1,null,"3692ce14",null),v=d.exports,p={name:"App",components:{CheckerBoard:v}},b=p,w=(0,f.A)(b,s,r,!1,null,null,null),m=w.exports;i.Ay.config.productionTip=!1,new i.Ay({render:t=>t(m)}).$mount("#app")}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,i,s,r){if(!i){var o=1/0;for(u=0;u<t.length;u++){i=t[u][0],s=t[u][1],r=t[u][2];for(var l=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[a])}))?i.splice(a--,1):(l=!1,r<o&&(o=r));if(l){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[i,s,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,r,o=i[0],l=i[1],a=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(a)var u=a(n)}for(e&&e(i);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},i=self["webpackChunkchess"]=self["webpackChunkchess"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(3513)}));i=n.O(i)})();
//# sourceMappingURL=app.75f91de3.js.map